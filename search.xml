<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mongodb的基本操作</title>
      <link href="/blog/2021/04/17/Mongodb_command/"/>
      <url>/blog/2021/04/17/Mongodb_command/</url>
      
        <content type="html"><![CDATA[<h3 id="1-选择和创建数据库"><a href="#1-选择和创建数据库" class="headerlink" title="1. 选择和创建数据库"></a>1. 选择和创建数据库</h3><ul><li>数据库的创建和进入数据库都是一个命令<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 库名</span><br></pre></td></tr></table></figure></li><li>创建一个数据库名为articledb<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use articledb</span><br></pre></td></tr></table></figure>注意mongodb的存储方式，只创建库没有数据时候，这个时候数据库是存在内存中，只有数据库中有内容才会存放到磁盘，所以创建完没有数据的库使用show dbs是看不到库的。</li><li>查看权限内所有的数据库<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br><span class="line">或者</span><br><span class="line">show databases</span><br></pre></td></tr></table></figure></li><li>查看当前正在使用的数据库<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db</span><br></pre></td></tr></table></figure>有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库</li><li>admin: 从权限的角度来看，这是”root”数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有数据库或者关闭服务器。</li><li>local: 这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合</li><li>config: 当mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息<h3 id="2-数据库的删除"><a href="#2-数据库的删除" class="headerlink" title="2. 数据库的删除"></a>2. 数据库的删除</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropDatabase()</span><br></pre></td></tr></table></figure><h3 id="3-集合操作"><a href="#3-集合操作" class="headerlink" title="3. 集合操作"></a>3. 集合操作</h3><h5 id="3-1-集合的显式创建"><a href="#3-1-集合的显式创建" class="headerlink" title="3.1 集合的显式创建"></a>3.1 集合的显式创建</h5>基本语法格式<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.createCollection(集合名称)</span><br></pre></td></tr></table></figure></li><li>创建一个名为mycollection的普通集合<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.createCollection(mycollection)</span><br></pre></td></tr></table></figure></li><li>查看当前库中的集合(表)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show collections</span><br><span class="line">或</span><br><span class="line">show tables</span><br></pre></td></tr></table></figure><h5 id="3-2-集合的隐形创建"><a href="#3-2-集合的隐形创建" class="headerlink" title="3.2 集合的隐形创建"></a>3.2 集合的隐形创建</h5>当向一个集合插入一个文档的时候，如果集合不存在，则自动创建集合<br>具体看文档插入部分<br>通常我们使用隐式创建文档<h5 id="3-3-删除集合"><a href="#3-3-删除集合" class="headerlink" title="3.3 删除集合"></a>3.3 删除集合</h5>基本语法格式<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.drop()</span><br></pre></td></tr></table></figure></li><li>删除mycollection集合<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycollection.drop()</span><br></pre></td></tr></table></figure><h3 id="4-文档的基本操作（增删改查）"><a href="#4-文档的基本操作（增删改查）" class="headerlink" title="4. 文档的基本操作（增删改查）"></a>4. 文档的基本操作（增删改查）</h3><h5 id="4-1-文档的插入"><a href="#4-1-文档的插入" class="headerlink" title="4.1 文档的插入"></a>4.1 文档的插入</h5></li><li>单个文档插入<br>创建一个comment的集合，并插入文档<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.insert(&#123;&quot;articleid&quot;:&quot;10000&quot;,&quot;content&quot;:&quot;今天天气真好，阳光明媚&quot;,&quot;userid&quot;:&quot;1001&quot;,&quot;nickname&quot;:&quot;Rose&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(10),&quot;state&quot;:null&#125;)</span><br></pre></td></tr></table></figure>提示：<br>1）comment集合如果不存在，则会自动创建<br>2）mongo中的数字，默认情况下是double类型，如果要存整型，必须使用函数NumberInt(整型数字)，否则取出来就有问题了<br>3）插入当前日期使用new Date()<br>4）插入的数据没有指定_id，会自动生成主键值<br>5）如果某个字段没值，可以赋值为null，或者不写该字段</li><li>批量插入<br>批量插入多条文章评论：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.insertMany([&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;Are you ok&quot;,&quot;userid&quot;:&quot;1002&quot;,&quot;nickname&quot;:&quot;alonzo&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(1000),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;3q&quot;,&quot;userid&quot;:&quot;1005&quot;,&quot;nickname&quot;:&quot;leijun&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(888),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;very match，阳光明媚&quot;,&quot;userid&quot;:&quot;mifans&quot;,&quot;nickname&quot;:&quot;alonzo&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(666),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;hello mifans&quot;,&quot;userid&quot;:&quot;1003&quot;,&quot;nickname&quot;:&quot;zhangsan&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(777),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;base&quot;,&quot;userid&quot;:&quot;1003&quot;,&quot;nickname&quot;:&quot;zhangsan&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(777),&quot;state&quot;:&quot;1&quot;&#125;])</span><br><span class="line">&#123;</span><br><span class="line">&quot;acknowledged&quot; : true,</span><br><span class="line">&quot;insertedIds&quot; : [</span><br><span class="line">ObjectId(&quot;604ac2298b964c15b2b578bd&quot;),</span><br><span class="line">ObjectId(&quot;604ac2298b964c15b2b578be&quot;),</span><br><span class="line">ObjectId(&quot;604ac2298b964c15b2b578bf&quot;),</span><br><span class="line">ObjectId(&quot;604ac2298b964c15b2b578c0&quot;),</span><br><span class="line">ObjectId(&quot;604ac2298b964c15b2b578c1&quot;)</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>学过Python应该就看出来，这里实际就是将多个字典插入列表里，形成一个表的多条数据<h5 id="4-2-文档的查询"><a href="#4-2-文档的查询" class="headerlink" title="4.2 文档的查询"></a>4.2 文档的查询</h5>语法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.文档名.find()</span><br><span class="line">或</span><br><span class="line">db.文档名.find(&#123;&#125;)</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;6049d65505bd0c812f09cec6&quot;), &quot;articleid&quot; : &quot;10000&quot;, &quot;content&quot; : &quot;今天天气真好，阳光明媚&quot;, &quot;userid&quot; : &quot;1001&quot;, &quot;nickname&quot; : &quot;Rose&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-11T08:35:33.041Z&quot;), &quot;likenum&quot; : 10, &quot;state&quot; : null &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578bd&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;Are you ok&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 1000, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578be&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578bf&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;mifans&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578c0&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578c1&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure><ul><li>条件查询，比如查询articleid为10001的记录<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;articleid:&quot;10001&quot;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578bd&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;Are you ok&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 1000, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578be&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578bf&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;mifans&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578c0&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578c1&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure></li><li>如上条件，但只想返回第一条数据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.findOne(&#123;articleid:&quot;10001&quot;&#125;)</span><br><span class="line">&#123;</span><br><span class="line">&quot;_id&quot; : ObjectId(&quot;604ac2298b964c15b2b578bd&quot;),</span><br><span class="line">&quot;articleid&quot; : &quot;10001&quot;,</span><br><span class="line">&quot;content&quot; : &quot;Are you ok&quot;,</span><br><span class="line">&quot;userid&quot; : &quot;1002&quot;,</span><br><span class="line">&quot;nickname&quot; : &quot;alonzo&quot;,</span><br><span class="line">&quot;createdatetime&quot; : ISODate(&quot;2021-03-12T01:21:45.418Z&quot;),</span><br><span class="line">&quot;likenum&quot; : 1000,</span><br><span class="line">&quot;state&quot; : &quot;1&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>投影查询<br>查询nickname为alonzo，只显示userid且不显示_id：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;nickname:&quot;alonzo&quot;&#125;,&#123;userid:1,_id:0&#125;)</span><br><span class="line">&#123; &quot;userid&quot; : &quot;1002&quot; &#125;</span><br><span class="line">&#123; &quot;userid&quot; : &quot;mifans&quot; &#125;</span><br></pre></td></tr></table></figure>查询结果只显示userid、nickname不显示_id:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;&#125;,&#123;userid:1,nickname:1,_id:0&#125;)</span><br><span class="line">&#123; &quot;userid&quot; : &quot;1001&quot;, &quot;nickname&quot; : &quot;Rose&quot; &#125;</span><br><span class="line">&#123; &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot; &#125;</span><br><span class="line">&#123; &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot; &#125;</span><br><span class="line">&#123; &quot;userid&quot; : &quot;mifans&quot;, &quot;nickname&quot; : &quot;alonzo&quot; &#125;</span><br><span class="line">&#123; &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot; &#125;</span><br><span class="line">&#123; &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot; &#125;</span><br></pre></td></tr></table></figure>实际上投影查询就是查询表中的列可以理解为<code>db.comment.find(&#123;行筛选&#125;,&#123;列筛选&#125;)</code><br>行筛选需要指定具体数据，列筛选指定0和1,<code>0为不显示，1为显示</code></li><li>由于批量插入数据较多容易出现失败，因此，可以使用try，catch进行异常处理，测试的时候可以不处理<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">db.comment.insertMany([&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;Are you ok&quot;,&quot;userid&quot;:&quot;1002&quot;,&quot;nickname&quot;:&quot;alonzo&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(1000),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;3q&quot;,&quot;userid&quot;:&quot;1005&quot;,&quot;nickname&quot;:&quot;leijun&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(888),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;very match，阳光明媚&quot;,&quot;userid&quot;:&quot;mifans&quot;,&quot;nickname&quot;:&quot;alonzo&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(666),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;hello mifans&quot;,&quot;userid&quot;:&quot;1003&quot;,&quot;nickname&quot;:&quot;zhangsan&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(777),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;base&quot;,&quot;userid&quot;:&quot;1003&quot;,&quot;nickname&quot;:&quot;zhangsan&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(777),&quot;state&quot;:&quot;1&quot;&#125;])</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">    print(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>目前没怎么理解这个功能<h5 id="4-3-文档的更新"><a href="#4-3-文档的更新" class="headerlink" title="4.3 文档的更新"></a>4.3 文档的更新</h5>更新文档的语法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.update(query,update,options)</span><br></pre></td></tr></table></figure></li><li>覆盖的修改<br>修改userid为1002的记录，点赞量为1001,输入以下语句：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.update(&#123;userid:&quot;1002&quot;&#125;,&#123;likenum:NumberInt(1001)&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 &#125;)</span><br><span class="line">&gt; db.comment.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985785&quot;), &quot;likenum&quot; : 1001 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985786&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985787&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;mifans&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985788&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985789&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure>可以看到这条更新修改把整个数据都给覆盖了，重新生成了之前修改的部分</li><li>局部修改<br>为了解决这个问题，需要使用$set来实现，之前添加文档的时候细心的朋友可能发现有个userid的值是mifans，这个是错误的，现在想把它改为1004，然后nickname改为mifans，命令如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.update(&#123;userid:&quot;mifans&quot;&#125;,&#123;$set:&#123;userid:&quot;1004&quot;,nickname:&quot;mifans&quot;&#125;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 &#125;)</span><br><span class="line">&gt; db.comment.find(&#123;userid:&quot;1004&quot;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985787&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure></li><li>批量的修改<br>更新所有用户为1003的用户昵称为lisi<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#默认只修改第一条数据</span><br><span class="line">&gt; db.comment.update(&#123;userid:&quot;1003&quot;&#125;,&#123;$set:&#123;nickname:&quot;lisi&quot;&#125;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 &#125;)</span><br><span class="line">&gt; db.comment.find(&#123;userid:&quot;1003&quot;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985788&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985789&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">#修改所有符合条件的数据（nickname改为lisi2来做区分）</span><br><span class="line">&gt; db.comment.update(&#123;userid:&quot;1003&quot;&#125;,&#123;$set:&#123;nickname:&quot;lisi2&quot;&#125;&#125;,&#123;multi:true&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nMatched&quot; : 2, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 2 &#125;)</span><br><span class="line">&gt; db.comment.find(&#123;userid:&quot;1003&quot;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985788&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi2&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985789&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi2&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure>所以只要后面不加参数<code>&#123;multi:true&#125;</code>则只更新第一条数据</li><li>列值增长的修改<br>如果我们想实现对某列值在原有值的基础上的进行增加或减少，可以使用<code>$inc</code>运算符来实现。<br>下面是对userid为1003的点赞数进行递增操作，每次递增2<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;userid:&quot;1003&quot;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985788&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi2&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985789&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi2&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&gt; db.comment.update(&#123;nickname:&quot;lisi2&quot;&#125;,&#123;$inc:&#123;likenum:NumberInt(2)&#125;&#125;,&#123;multi:true&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nMatched&quot; : 2, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 2 &#125;)</span><br><span class="line">&gt; db.comment.find(&#123;nickname:&quot;lisi2&quot;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985788&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi2&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 779, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985789&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi2&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 779, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure><h5 id="4-4-删除文档"><a href="#4-4-删除文档" class="headerlink" title="4.4 删除文档"></a>4.4 删除文档</h5>删除文档的语法结构：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名称.remove(条件)</span><br></pre></td></tr></table></figure>以下语句可以讲数据全部删除，请慎用<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.remove(&#123;&#125;)</span><br></pre></td></tr></table></figure></li><li>如果删除userid为1003的记录，输入以下语句<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985785&quot;), &quot;likenum&quot; : 1001 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985786&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985787&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985788&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi2&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 779, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985789&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;lisi2&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 779, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&gt; db.comment.remove(&#123;userid:&quot;1003&quot;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nRemoved&quot; : 2 &#125;)</span><br><span class="line">&gt; db.comment.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985785&quot;), &quot;likenum&quot; : 1001 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985786&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;604ad16235ffd35bf6985787&quot;), &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-12T02:26:42.644Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure></li><li>删除comment里的全部数据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.remove(&#123;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nRemoved&quot; : 3 &#125;)</span><br><span class="line">&gt; db.comment.find()</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><h3 id="5-文档的分页查询"><a href="#5-文档的分页查询" class="headerlink" title="5. 文档的分页查询"></a>5. 文档的分页查询</h3>首先先将上面删除的数据给创建出来<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#创建初始数据</span><br><span class="line">try &#123;</span><br><span class="line">db.comment.insertMany([&#123;_id:&quot;1&quot;,&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;Are you ok&quot;,&quot;userid&quot;:&quot;1002&quot;,&quot;nickname&quot;:&quot;alonzo&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(1000),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;_id:&quot;2&quot;,&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;3q&quot;,&quot;userid&quot;:&quot;1005&quot;,&quot;nickname&quot;:&quot;leijun&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(888),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;_id:&quot;3&quot;,&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;very match，阳光明媚&quot;,&quot;userid&quot;:&quot;1004&quot;,&quot;nickname&quot;:&quot;mifans&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(666),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;_id:&quot;4&quot;,&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;hello mifans&quot;,&quot;userid&quot;:&quot;1003&quot;,&quot;nickname&quot;:&quot;zhangsan&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(777),&quot;state&quot;:&quot;1&quot;&#125;,</span><br><span class="line">&#123;_id:&quot;5&quot;,&quot;articleid&quot;:&quot;10001&quot;,&quot;content&quot;:&quot;base&quot;,&quot;userid&quot;:&quot;1003&quot;,&quot;nickname&quot;:&quot;zhangsan&quot;,&quot;createdatetime&quot;:new Date(),&quot;likenum&quot;:NumberInt(777),&quot;state&quot;:&quot;1&quot;&#125;])</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">    print(e)</span><br><span class="line">&#125;</span><br><span class="line">#查询一下</span><br><span class="line">&gt; db.comment.find()</span><br><span class="line">&#123; &quot;_id&quot; : &quot;1&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;Are you ok&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 1000, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;3&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;4&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure><h5 id="5-1-统计查询"><a href="#5-1-统计查询" class="headerlink" title="5.1 统计查询"></a>5.1 统计查询</h5>统计查询使用count方法,语法如下<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.comment.count(query,option)</span><br></pre></td></tr></table></figure></li><li>例如统计comment中所有记录数：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.count()</span><br><span class="line">5</span><br></pre></td></tr></table></figure></li><li>统计userid为1003的记录数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.count(&#123;userid:&quot;1003&quot;&#125;)</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h5 id="5-2-分页列表查询"><a href="#5-2-分页列表查询" class="headerlink" title="5.2 分页列表查询"></a>5.2 分页列表查询</h5>可以使用limit()方法来读取指定数量的数据，使用skip()方法来跳过指定数量的数据<br>基本语法如下所示：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.find().limit().skip()</span><br></pre></td></tr></table></figure></li><li>返回指定条数的记录，可以在find方法后调用limit来返回结果(TopN),默认值20，如下查看前三条数据：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find().limit(3)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;1&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;Are you ok&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 1000, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;3&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure></li><li>skip方法同样接受一个数字参数作为跳过记录条数，即前N个不要，默认值是0，如下查询时跳过前三条数据：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find().skip(3)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;4&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure></li><li>分页查询：要求：每页两个，第二页开始：跳过前两条数据，接着显示3和4条数据，以此类推<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#显示第一页，每页两条数据</span><br><span class="line">&gt; db.comment.find().skip().limit(2)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;1&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;Are you ok&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 1000, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">#显示第二页，每页两条数据</span><br><span class="line">&gt; db.comment.find().skip(2).limit(2)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;3&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;4&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">#显示第三页，每页两条数据</span><br><span class="line">&gt; db.comment.find().skip(4).limit(2)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure>可以看到显示第三页的时候数据不足两条，则只返回一条<h5 id="5-3-排序查询"><a href="#5-3-排序查询" class="headerlink" title="5.3 排序查询"></a>5.3 排序查询</h5>sort()方法对数据进行排序，sort()方法可以通过参数指定排序字段，并使用1和-1来指定排序的方式，其中1为升序排序，-1为降序排序<br>语法如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.find().sort(&#123;KEY1:1,KEY2:-1&#125;)</span><br></pre></td></tr></table></figure></li><li>对userid升序排序，并对点赞数进行降序排序<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;&#125;,&#123;userid:1,likenum:1&#125;).sort(&#123;userid:1,likenum:-1&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;1&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;likenum&quot; : 1000 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;4&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;likenum&quot; : 777 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;likenum&quot; : 777 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;3&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;likenum&quot; : 666 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;likenum&quot; : 888 &#125;</span><br></pre></td></tr></table></figure>这里数据降序看不出来，理论上userid为1003的那两个数据likenum会进行降序排列<h3 id="6-文档的更多查询"><a href="#6-文档的更多查询" class="headerlink" title="6. 文档的更多查询"></a>6. 文档的更多查询</h3><h5 id="6-1正则的复杂条件查询"><a href="#6-1正则的复杂条件查询" class="headerlink" title="6.1正则的复杂条件查询"></a>6.1正则的复杂条件查询</h5>Mongodb的模糊查询是通过正则表达式的方式实现的，格式为：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.find(&#123;字段:&#x2F;正则表达式&#x2F;&#125;)</span><br></pre></td></tr></table></figure>提示：正则是js的语法</li><li>现在要查询评论内容包含“阳光明媚”的所有文档<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#因为上面创建的文档只有一条记录有“阳光明媚”，所以再更新其他一条让它有两条该数据，方便我们查询</span><br><span class="line">&gt; db.comment.update(&#123;_id:&quot;5&quot;&#125;,&#123;$set:&#123;content:&quot;base,阳光明媚&quot;&#125;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nMatched&quot; : 1, &quot;nUpserted&quot; : 0, &quot;nModified&quot; : 1 &#125;)</span><br><span class="line">&gt; db.comment.find(&#123;_id:&quot;5&quot;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base,阳光明媚&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line"></span><br><span class="line">#查询评论中包含“阳光明媚”的所有文档</span><br><span class="line">&gt; db.comment.find(&#123;content:&#x2F;阳光明媚&#x2F;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;3&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base,阳光明媚&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure></li><li>查询以数字开头的评论<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;content:&#x2F;^[0-9]&#x2F;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure><h5 id="6-2-比较查询"><a href="#6-2-比较查询" class="headerlink" title="6.2 比较查询"></a>6.2 比较查询</h5>&lt;,&lt;=,&gt;,&gt;=这些操作符也是很常用的，格式如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.find(&#123;字段:&#123;$gt:数值&#125;&#125;)  #大于</span><br><span class="line">db.集合名.find(&#123;字段:&#123;$lt:数值&#125;&#125;)  #小于</span><br><span class="line">db.集合名.find(&#123;字段:&#123;$gte:数值&#125;&#125;)  #大于等于</span><br><span class="line">db.集合名.find(&#123;字段:&#123;$lte:数值&#125;&#125;)  #小于等于</span><br><span class="line">db.集合名.find(&#123;字段:&#123;$ne:数值&#125;&#125;)  #不等于</span><br></pre></td></tr></table></figure></li><li>查询评论点赞数大于700的记录<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;likenum:&#123;$gt:700&#125;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;1&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;Are you ok&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 1000, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;4&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base,阳光明媚&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure><h5 id="6-3-包含查询"><a href="#6-3-包含查询" class="headerlink" title="6.3 包含查询"></a>6.3 包含查询</h5>包含使用$in操作符</li><li>查询评论的集合中userid字段包含1003和1004的文档<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;userid:&#123;$in:[&quot;1003&quot;,&quot;1004&quot;]&#125;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;3&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;4&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base,阳光明媚&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure></li><li>不包含使用$nin操作符<br>查询评论集合中userid字段不包含1003和1004的文档<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;userid:&#123;$nin:[&quot;1003&quot;,&quot;1004&quot;]&#125;&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;1&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;Are you ok&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 1000, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure><h5 id="6-4-条件连接查询"><a href="#6-4-条件连接查询" class="headerlink" title="6.4 条件连接查询"></a>6.4 条件连接查询</h5>我们如果需要查询同时满足两个以上条件，需要使用$and操作符进行关联。(相当于SQL里的and)<br>格式为：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.find(&#123;$and:[&#123; &#125;,&#123; &#125;,&#123; &#125;]&#125;)</span><br></pre></td></tr></table></figure></li><li>查询评论集合中likenum大于等于700且小于2000的记录<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;$and:[&#123;likenum:&#123;$gte:NumberInt(700)&#125;&#125;,&#123;likenum:&#123;$lt:NumberInt(2000)&#125;&#125;]&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;1&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;Are you ok&quot;, &quot;userid&quot; : &quot;1002&quot;, &quot;nickname&quot; : &quot;alonzo&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 1000, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;4&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base,阳光明媚&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure>如果两个以上条件之间是或者的关系，我们使用操作符进行关联，与前面and的使用方式相同格式为：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名.find(&#123;$or:[&#123; &#125;,&#123; &#125;,&#123; &#125;]&#125;)</span><br></pre></td></tr></table></figure>查询评论集合中userid为1003，或者点赞数小于1000的文档记录：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.comment.find(&#123;$or:[&#123;userid:&quot;1003&quot;&#125;,&#123;likenum:&#123;$lt:NumberInt(1000)&#125;&#125;]&#125;)</span><br><span class="line">&#123; &quot;_id&quot; : &quot;2&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;3q&quot;, &quot;userid&quot; : &quot;1005&quot;, &quot;nickname&quot; : &quot;leijun&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 888, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;3&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;very match，阳光明媚&quot;, &quot;userid&quot; : &quot;1004&quot;, &quot;nickname&quot; : &quot;mifans&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 666, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;4&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;hello mifans&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br><span class="line">&#123; &quot;_id&quot; : &quot;5&quot;, &quot;articleid&quot; : &quot;10001&quot;, &quot;content&quot; : &quot;base,阳光明媚&quot;, &quot;userid&quot; : &quot;1003&quot;, &quot;nickname&quot; : &quot;zhangsan&quot;, &quot;createdatetime&quot; : ISODate(&quot;2021-03-14T02:39:11.573Z&quot;), &quot;likenum&quot; : 777, &quot;state&quot; : &quot;1&quot; &#125;</span><br></pre></td></tr></table></figure><h3 id="7-常用命令小结"><a href="#7-常用命令小结" class="headerlink" title="7. 常用命令小结"></a>7. 常用命令小结</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">选择切换数据库：use articledb</span><br><span class="line">插入数据：db.comment.insert(&#123;bson数据&#125;)</span><br><span class="line">查询所有数据：db.comment.find()</span><br><span class="line">条件查询数据：db.comment.find(&#123;条件&#125;)</span><br><span class="line">查询符合条件的第一条记录：db.comment.findOne(&#123;条件&#125;)</span><br><span class="line">查询符合条件的前n条数据：db.comment.find.(&#123;条件&#125;).limit(n)</span><br><span class="line">查询第n条数据后的数据：db.comment.find(&#123;条件&#125;).skip(n)</span><br><span class="line">修改数据：db.comment.update(&#123;条件&#125;,&#123;修改后的数据&#125;)或者db.comment.update(&#123;条件&#125;,&#123;$set:&#123;修改后的数据&#125;&#125;)</span><br><span class="line">修改数据并自增某字段的值：db.comment.update(&#123;条件&#125;,&#123;$inc:&#123;自增的字段:步数&#125;&#125;)</span><br><span class="line">删除数据：db.comment.remove(&#123;条件&#125;)</span><br><span class="line">统计数据：db.comment.count(&#123;条件&#125;)</span><br><span class="line">模糊查询：db.comment.find(&#123;字段名:&#x2F;正则表达式&#x2F;&#125;)</span><br><span class="line">条件比较查询：db.comment.find(&#123;字段名:&#123;$gt:值&#125;&#125;)</span><br><span class="line">包含查询：db.comment.find(&#123;字段名:&#123;$in:[值1，值2]&#125;&#125;)</span><br><span class="line">条件连接查询：db.comment.find(&#123;$and:[&#123;条件1&#125;,&#123;条件2&#125;]&#125;)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Mongodb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/blog/2021/04/17/hello-world/"/>
      <url>/blog/2021/04/17/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
